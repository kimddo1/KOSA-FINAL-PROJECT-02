# 통계시각화 AI 분석 기능

이 기능은 지원자 통계 차트에 대한 AI 기반 해석 및 분석 결과를 제공합니다.

## 🎯 기능 개요

각 통계 차트별로 AI가 데이터를 분석하여 다음과 같은 정보를 제공합니다:

- **기본 분석 결과**: 차트 데이터의 핵심 통계 정보
- **주요 인사이트**: 데이터에서 발견된 중요한 패턴과 의미
- **권장사항**: 채용 전략 개선을 위한 구체적인 제안

## 📊 지원하는 차트 타입

1. **지원 시기별 추이** (`trend`)
   - 일별 지원자 수 변화 분석
   - 피크 시기 및 추세 패턴 분석
   - 홍보 효과 및 지원자 유입 전략 제안

2. **연령대별 지원자** (`age`)
   - 주요 연령대 분석
   - 연령별 관심도 패턴 분석
   - 타겟 연령층 맞춤 전략 제안

3. **성별 지원자** (`gender`)
   - 성별 분포 분석
   - 다양성 및 포용성 평가
   - 균형잡힌 채용을 위한 제안

4. **학력별 지원자** (`education`)
   - 주요 학력 수준 분석
   - 고학력자 비율 분석
   - 학력별 맞춤 전략 제안

5. **지역별 지원자** (`province`)
   - 지역별 분포 분석
   - 수도권 vs 지방 비율 분석
   - 지역별 홍보 전략 제안

6. **자격증 보유 현황** (`certificate`)
   - 자격증 보유자 비율 분석
   - 전문성 수준 평가
   - 자격증 활용 전략 제안

## 🏗️ 아키텍처

### 백엔드 (FastAPI)

```
backend/app/api/v1/statistics_analysis.py
├── StatisticsAnalysisRequest (Pydantic 모델)
├── StatisticsAnalysisResponse (Pydantic 모델)
├── analyze_trend_data() - 지원 시기별 추이 분석
├── analyze_age_data() - 연령대별 분석
├── analyze_gender_data() - 성별 분석
├── analyze_education_data() - 학력별 분석
├── analyze_province_data() - 지역별 분석
├── analyze_certificate_data() - 자격증 분석
└── analyze_statistics() - 메인 API 엔드포인트
```

### 프론트엔드 (React)

```
frontend/src/components/StatisticsAnalysis.jsx
├── AI 분석 결과 표시 컴포넌트
├── 로딩 상태 관리
├── 에러 처리
├── 접기/펼치기 기능
└── 차트별 분석 결과 렌더링
```

## 🚀 사용 방법

### 1. 백엔드 서버 실행

```bash
cd backend
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### 2. 프론트엔드 서버 실행

```bash
cd frontend
npm install
npm run dev
```

### 3. 통계 모달창 접근

1. 지원자 목록 페이지에서 통계 아이콘 클릭
2. 각 차트를 확인하면서 AI 분석 결과 확인
3. 분석 결과는 차트 아래에 자동으로 표시됨

## 📡 API 엔드포인트

### POST /statistics/analyze

통계 데이터에 대한 AI 분석을 제공합니다.

**요청 예시:**
```json
{
  "job_post_id": 1,
  "chart_type": "trend",
  "chart_data": [
    {"date": "2025-07-05", "count": 3},
    {"date": "2025-07-06", "count": 3},
    {"date": "2025-07-07", "count": 20}
  ]
}
```

**응답 예시:**
```json
{
  "analysis": "📊 **지원 시기별 추이 분석**\n\n**전체 지원자 수**: 26명\n**평균 일일 지원자 수**: 2.6명\n**최고 지원일**: 2025-07-07 (20명)\n**최저 지원일**: 2025-07-08 (1명)",
  "insights": [
    "📈 2025-07-07에 지원자가 급증했습니다. 이는 채용공고 게시나 홍보 활동의 효과일 수 있습니다.",
    "⚠️ 전체 지원자 수가 적습니다. 채용공고 홍보를 강화하는 것을 고려해보세요."
  ],
  "recommendations": [
    "🎯 피크 시기에 맞춰 추가 채용공고나 홍보를 계획해보세요.",
    "📢 채용공고 노출을 높이기 위해 다양한 채널을 활용해보세요."
  ]
}
```

## 🧪 테스트

테스트 스크립트를 실행하여 API 기능을 확인할 수 있습니다:

```bash
python test_statistics_analysis.py
```

## 🎨 UI/UX 특징

### 디자인 요소
- **Material-UI 컴포넌트** 사용
- **접기/펼치기 기능**으로 공간 효율성 확보
- **로딩 상태** 표시로 사용자 경험 개선
- **에러 처리** 및 사용자 친화적 메시지

### 색상 체계
- **분석 결과**: 파란색 (#1976d2)
- **인사이트**: 주황색 (#ff9800)
- **권장사항**: 초록색 (#4caf50)

### 아이콘
- 🧠 AI 분석 아이콘
- 💡 인사이트 아이콘
- ✅ 권장사항 아이콘
- 📊 차트 타입별 아이콘

## 🔧 설정 및 커스터마이징

### 분석 로직 수정

각 차트 타입별 분석 함수를 수정하여 더 정교한 분석을 제공할 수 있습니다:

```python
def analyze_trend_data(chart_data: List[Dict[str, Any]], job_post: JobPost) -> Dict[str, Any]:
    # 여기에 커스텀 분석 로직 추가
    pass
```

### 프론트엔드 스타일링

`StatisticsAnalysis.jsx` 컴포넌트의 스타일을 수정하여 디자인을 커스터마이징할 수 있습니다:

```jsx
<Card 
  sx={{ 
    mt: 2, 
    backgroundColor: '#f8f9fa',  // 배경색 변경
    border: '1px solid #e0e0e0', // 테두리 변경
    borderRadius: 2
  }}
>
```

## 📈 성능 최적화

### 캐싱 전략
- 분석 결과는 실시간으로 생성되므로 필요시 Redis 캐싱 추가 가능
- 동일한 차트 데이터에 대한 중복 분석 방지

### 비동기 처리
- 대용량 데이터 분석 시 백그라운드 작업으로 처리 가능
- 사용자 경험을 위한 로딩 상태 표시

## 🔮 향후 개선 계획

1. **더 정교한 AI 분석**
   - 머신러닝 모델을 활용한 예측 분석
   - 시계열 분석을 통한 트렌드 예측

2. **인터랙티브 기능**
   - 분석 결과에 대한 사용자 피드백 수집
   - 맞춤형 분석 옵션 제공

3. **리포트 생성**
   - PDF 형태의 분석 리포트 생성
   - 이메일 발송 기능

4. **다국어 지원**
   - 영어, 일본어 등 다국어 분석 결과 제공

## 🐛 문제 해결

### 일반적인 문제들

1. **API 연결 실패**
   - 백엔드 서버가 실행 중인지 확인
   - 포트 8000이 사용 가능한지 확인

2. **분석 결과가 표시되지 않음**
   - 차트 데이터가 올바른 형식인지 확인
   - 브라우저 개발자 도구에서 네트워크 오류 확인

3. **로딩이 계속됨**
   - 네트워크 연결 상태 확인
   - 서버 로그에서 오류 메시지 확인

### 디버깅 팁

```bash
# 백엔드 로그 확인
tail -f backend/logs/app.log

# 프론트엔드 개발자 도구
# Network 탭에서 API 요청/응답 확인
# Console 탭에서 JavaScript 오류 확인
```

## 📞 지원

기술적 문제나 개선 제안이 있으시면 이슈를 등록해주세요.

---

**버전**: 1.0.0  
**최종 업데이트**: 2025년 1월  
**담당자**: AI 개발팀 